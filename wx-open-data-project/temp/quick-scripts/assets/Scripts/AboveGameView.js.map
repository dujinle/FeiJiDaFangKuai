{"version":3,"sources":["AboveGameView.js"],"names":["cc","Class","extends","Component","properties","aboveLabel","Node","avaterSprite","nameLabel","scoreLabel","loadRank","data","myData","score","console","log","upObject","i","length","dd","maxScore","getMaxScore","my","getComponent","Label","string","loadImage","avatarUrl","nickname","node","url","loader","load","type","err","tex","Sprite","spriteFrame","SpriteFrame","j","KVDataList","kvdata","key","parseInt","value"],"mappings":";;;;;;AAAAA,GAAGC,KAAH,CAAS;AACLC,UAASF,GAAGG,SADP;;AAGLC,aAAY;AACdC,cAAWL,GAAGM,IADA;AAEdC,gBAAaP,GAAGM,IAFF;AAGdE,aAAUR,GAAGM,IAHC;AAIdG,cAAWT,GAAGM;AAJA,EAHP;AASRI,SATQ,oBASCC,IATD,EASMC,MATN,EASaC,KATb,EASmB;AAC1BC,UAAQC,GAAR,CAAYJ,IAAZ,EAAiBC,MAAjB,EAAwBC,KAAxB;AACA,MAAIG,WAAW,IAAf;AACA,OAAI,IAAIC,IAAI,CAAZ,EAAcA,IAAIN,KAAKO,MAAvB,EAA8BD,GAA9B,EAAkC;AACjC,OAAIE,KAAKR,KAAKM,CAAL,CAAT;AACA,OAAIG,WAAW,KAAKC,WAAL,CAAiBF,EAAjB,CAAf;AACA;AACA,OAAGA,GAAGG,EAAH,IAAS,IAAZ,EAAiB;AAChB;AACA;AACD,OAAGF,WAAWP,KAAd,EAAoB;AACnB;AACA;AACDG,cAAWG,EAAX;AACA;AACD,MAAGH,YAAY,IAAf,EAAoB;AACnB,QAAKX,UAAL,CAAgBkB,YAAhB,CAA6BvB,GAAGwB,KAAhC,EAAuCC,MAAvC,GAAgD,MAAhD;AACA,QAAKC,SAAL,CAAe,KAAKnB,YAApB,EAAiCK,OAAOe,SAAxC;AACA,QAAKnB,SAAL,CAAee,YAAf,CAA4BvB,GAAGwB,KAA/B,EAAsCC,MAAtC,GAA+Cb,OAAOgB,QAAtD;AACA,QAAKnB,UAAL,CAAgBc,YAAhB,CAA6BvB,GAAGwB,KAAhC,EAAuCC,MAAvC,GAAgDZ,KAAhD;AACA,GALD,MAKK;AACJ,QAAKR,UAAL,CAAgBkB,YAAhB,CAA6BvB,GAAGwB,KAAhC,EAAuCC,MAAvC,GAAgD,MAAhD;AACA,QAAKC,SAAL,CAAe,KAAKnB,YAApB,EAAiCS,SAASW,SAA1C;AACA,QAAKnB,SAAL,CAAee,YAAf,CAA4BvB,GAAGwB,KAA/B,EAAsCC,MAAtC,GAA+CT,SAASY,QAAxD;AACA,QAAKnB,UAAL,CAAgBc,YAAhB,CAA6BvB,GAAGwB,KAAhC,EAAuCC,MAAvC,GAAgD,KAAKJ,WAAL,CAAiBL,QAAjB,CAAhD,CAA2E;AAC3E;AACD,EAnCO;AAoCRU,UApCQ,qBAoCEG,IApCF,EAoCOC,GApCP,EAoCW;AAClB,MAAGA,OAAO,IAAP,IAAeA,IAAIZ,MAAJ,IAAc,CAAhC,EAAkC;AACjC;AACA;AACDlB,KAAG+B,MAAH,CAAUC,IAAV,CAAe,EAACF,KAAIA,GAAL,EAAUG,MAAM,KAAhB,EAAf,EAAuC,UAAUC,GAAV,EAAeC,GAAf,EAAoB;AAC1D;AACAN,QAAKN,YAAL,CAAkBvB,GAAGoC,MAArB,EAA6BC,WAA7B,GAA2C,IAAIrC,GAAGsC,WAAP,CAAmBH,GAAnB,CAA3C;AACA,GAHD;AAIA,EA5CO;AA6CRd,YA7CQ,uBA6CIF,EA7CJ,EA6CO;AACd,OAAI,IAAIoB,IAAI,CAAZ,EAAcA,IAAIpB,GAAGqB,UAAH,CAActB,MAAhC,EAAuCqB,GAAvC,EAA2C;AAC1C,OAAIE,SAAStB,GAAGqB,UAAH,CAAcD,CAAd,CAAb;AACA,OAAGE,OAAOC,GAAP,IAAc,UAAjB,EAA4B;AAC3B,WAAOC,SAASF,OAAOG,KAAhB,CAAP;AACA;AACD;AACD,SAAO,CAAP;AACA;AArDO,CAAT","file":"AboveGameView.js","sourceRoot":"..\\..\\..\\..\\assets\\Scripts","sourcesContent":["cc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n\t\taboveLabel:cc.Node,\r\n\t\tavaterSprite:cc.Node,\r\n\t\tnameLabel:cc.Node,\r\n\t\tscoreLabel:cc.Node,\r\n    },\r\n\tloadRank(data,myData,score){\r\n\t\tconsole.log(data,myData,score);\r\n\t\tvar upObject = null;\r\n\t\tfor(var i = 0;i < data.length;i++){\r\n\t\t\tvar dd = data[i];\r\n\t\t\tvar maxScore = this.getMaxScore(dd);\r\n\t\t\t//如果最大分数小于分数 则找到 break\r\n\t\t\tif(dd.my == true){\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\t\t\tif(maxScore < score){\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t\tupObject = dd;\r\n\t\t}\r\n\t\tif(upObject == null){\r\n\t\t\tthis.aboveLabel.getComponent(cc.Label).string = '无人可挡';\r\n\t\t\tthis.loadImage(this.avaterSprite,myData.avatarUrl);\r\n\t\t\tthis.nameLabel.getComponent(cc.Label).string = myData.nickname;\r\n\t\t\tthis.scoreLabel.getComponent(cc.Label).string = score;\r\n\t\t}else{\r\n\t\t\tthis.aboveLabel.getComponent(cc.Label).string = '即将超越';\r\n\t\t\tthis.loadImage(this.avaterSprite,upObject.avatarUrl);\r\n\t\t\tthis.nameLabel.getComponent(cc.Label).string = upObject.nickname;\r\n\t\t\tthis.scoreLabel.getComponent(cc.Label).string = this.getMaxScore(upObject);;\r\n\t\t}\r\n\t},\r\n\tloadImage(node,url){\r\n\t\tif(url == null || url.length == 0){\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tcc.loader.load({url:url, type: 'png'}, function (err, tex) {\r\n\t\t\t//console.log(\"loadImage\",url,node);\r\n\t\t\tnode.getComponent(cc.Sprite).spriteFrame = new cc.SpriteFrame(tex);\r\n\t\t});\r\n\t},\r\n\tgetMaxScore(dd){\r\n\t\tfor(var j = 0;j < dd.KVDataList.length;j++){\r\n\t\t\tvar kvdata = dd.KVDataList[j];\r\n\t\t\tif(kvdata.key == \"maxScore\"){\r\n\t\t\t\treturn parseInt(kvdata.value);\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn 0;\r\n\t}\r\n});\r\n"]}