{"version":3,"sources":["WxOpenDataJS.js"],"names":["cc","Class","extends","Component","properties","finishGameRank","Node","rankGmameView","aboveGameView","onLoad","setViewVisiable","start","wx","onMessage","data","type","getFriendCloudStorage","keyList","success","rankList","sortRank","res","drawRankOverList","drawRankFrientList","getGroupCloudStorage","shareTicket","initRankFriendCloudStorage","drawRankList","battleInit","myRankData","dataList","getUserInfo","openIdList","lang","console","log","i","length","item","rank","my","nickname","nickName","score","fail","reject","active","preData","drawList","findSelf","push","getComponent","loadRank","sort","sortFunction","a","b","amaxScore","bmaxScore","KVDataList","aitem","key","parseInt","value","bitem"],"mappings":"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","file":"WxOpenDataJS.js","sourceRoot":"..\\..\\..\\..\\assets\\Scripts","sourcesContent":["\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n\t\tfinishGameRank:cc.Node,\r\n\t\trankGmameView:cc.Node,\r\n\t\taboveGameView:cc.Node,\r\n    },\r\n\tonLoad(){\r\n\t\tthis.setViewVisiable(null);\r\n\t},\r\n    start () {\r\n        wx.onMessage(data => {\r\n\t\t\tthis.setViewVisiable(null);\r\n            switch (data.type) {\r\n                case 'gameOverUIRank':\r\n\t\t\t\t\twx.getFriendCloudStorage({\r\n\t\t\t\t\t\tkeyList: ['maxScore','maxLevel'], // 你要获取的、托管在微信后台都key\r\n\t\t\t\t\t\tsuccess: res => {\r\n\t\t\t\t\t\t\t//console.log(res.data);\r\n\t\t\t\t\t\t\t//排序\r\n\t\t\t\t\t\t\tthis.setViewVisiable(data.type);\r\n\t\t\t\t\t\t\tvar rankList = this.sortRank(res.data);\r\n\t\t\t\t\t\t\tthis.drawRankOverList(rankList,data);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t\t\r\n                    break;\r\n                case 'rankUIFriendRank':\r\n\t\t\t\t\twx.getFriendCloudStorage({\r\n\t\t\t\t\t\tkeyList: ['maxScore','maxLevel'], // 你要获取的、托管在微信后台都key\r\n\t\t\t\t\t\tsuccess: res => {\r\n\t\t\t\t\t\t\t//console.log(res.data);\r\n\t\t\t\t\t\t\t//排序\r\n\t\t\t\t\t\t\tthis.setViewVisiable(data.type);\r\n\t\t\t\t\t\t\tvar rankList = this.sortRank(res.data);\r\n\t\t\t\t\t\t\tthis.drawRankFrientList(rankList,data);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n                    break;\r\n\t\t\t\tcase 'rankUIGroupRank':\r\n\t\t\t\t\twx.getGroupCloudStorage({\r\n\t\t\t\t\t\tshareTicket: data.shareTicket,\r\n\t\t\t\t\t\tkeyList: ['maxScore','maxLevel'], // 你要获取的、托管在微信后台都key\r\n\t\t\t\t\t\tsuccess: res => {\r\n\t\t\t\t\t\t\t//console.log(res.data);\r\n\t\t\t\t\t\t\t//排序\r\n\t\t\t\t\t\t\tthis.setViewVisiable(data.type);\r\n\t\t\t\t\t\t\tvar rankList = this.sortRank(res.data);\r\n\t\t\t\t\t\t\tthis.drawRankFrientList(rankList,data);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n                    break;\r\n\t\t\t\tcase 'initFriendRank':\r\n\t\t\t\t\tthis.setViewVisiable(data.type);\r\n\t\t\t\t\tthis.initRankFriendCloudStorage(data);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'battleUIRank':\r\n\t\t\t\t\tthis.setViewVisiable(data.type);\r\n\t\t\t\t\tthis.drawRankList(this.rankList,data);\r\n                    break;\r\n            }\r\n        });\r\n    },\r\n\tinitRankFriendCloudStorage(data){\r\n\t\tthis.rankList = null;\r\n\t\tthis.battleInit = false;\r\n\t\tthis.myRankData = null;\r\n\t\twx.getFriendCloudStorage({\r\n\t\t\tkeyList: ['maxScore','maxLevel'], // 你要获取的、托管在微信后台都key\r\n\t\t\tsuccess: res => {\r\n\t\t\t\t//console.log(res.data);\r\n\t\t\t\tvar dataList = res.data;\r\n\t\t\t\twx.getUserInfo({\r\n\t\t\t\t\topenIdList: ['selfOpenId'],\r\n\t\t\t\t\tlang: 'zh_CN',\r\n\t\t\t\t\tsuccess: (res) => {\r\n\t\t\t\t\t\tconsole.log('getUserInfo success', res.data);\r\n\t\t\t\t\t\tfor(var i = 0;i < dataList.length;i++){\r\n\t\t\t\t\t\t\tvar item = dataList[i];\r\n\t\t\t\t\t\t\titem.rank = i + 1;\r\n\t\t\t\t\t\t\titem.my = false;\r\n\t\t\t\t\t\t\tif(item.nickname == res.data[0].nickName){\r\n\t\t\t\t\t\t\t\titem.my = true;\r\n\t\t\t\t\t\t\t\tthis.myRankData = item;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tthis.rankList = this.sortRank(dataList);\r\n\t\t\t\t\t\tthis.battleInit = true;\r\n\t\t\t\t\t\tvar data = {type:'battleUIRank',score:0};\r\n\t\t\t\t\t\tthis.setViewVisiable(data.type);\r\n\t\t\t\t\t\tthis.drawRankList(this.rankList,data);\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfail: (res) => {\r\n\t\t\t\t\t\t//console.log('getUserInfo reject', res.data)\r\n\t\t\t\t\t\treject(res)\r\n\t\t\t\t\t\t//data.name = '我';\r\n\t\t\t\t\t\t//data.avatarUrl = 'res/raw-assets/resources/textures/fireSprite.png';\r\n\t\t\t\t\t\t//this.drawSelfRank(data.KVDataList);\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t});\r\n\t},\r\n\tsetViewVisiable(type){\r\n\t\tthis.finishGameRank.active = false;\r\n\t\tthis.rankGmameView.active = false;\r\n\t\tthis.aboveGameView.active = false;\r\n\t\tif(type == 'battleUIRank'){\r\n\t\t\tthis.aboveGameView.active = true;\r\n\t\t}else if(type == 'rankUIGroupRank'){\r\n\t\t\tthis.rankGmameView.active = true;\r\n\t\t}else if(type == 'rankUIFriendRank'){\r\n\t\t\tthis.rankGmameView.active = true;\r\n\t\t}else if(type == 'gameOverUIRank'){\r\n\t\t\tthis.finishGameRank.active = true;\r\n\t\t}\r\n\t},\r\n\tdrawRankOverList(dataList,data){\r\n\t\twx.getUserInfo({\r\n\t\t\topenIdList: ['selfOpenId'],\r\n\t\t\tlang: 'zh_CN',\r\n\t\t\tsuccess: (res) => {\r\n\t\t\t\tconsole.log('getUserInfo success', res.data);\r\n\t\t\t\tvar preData = null;\r\n\t\t\t\tvar drawList = [];\r\n\t\t\t\tvar findSelf = false;\r\n\t\t\t\tfor(var i = 0;i < dataList.length;i++){\r\n\t\t\t\t\tvar item = dataList[i];\r\n\t\t\t\t\titem.rank = i + 1;\r\n\t\t\t\t\titem.my = false;\r\n\t\t\t\t\tif(item.nickname == res.data[0].nickName){\r\n\t\t\t\t\t\titem.my = true;\r\n\t\t\t\t\t\tif(preData != null){\r\n\t\t\t\t\t\t\tdrawList.push(preData);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tdrawList.push(item);\r\n\t\t\t\t\t\tfindSelf = true;\r\n\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif(findSelf == true){\r\n\t\t\t\t\t\tif(drawList.length <= 2){\r\n\t\t\t\t\t\t\tdrawList.push(item);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\t//找到三个 如果有了就结束循环\r\n\t\t\t\t\tif(drawList.length >= 3){\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tpreData = item;\r\n\t\t\t\t}\r\n\t\t\t\tthis.drawRankList(drawList,data);\r\n\t\t\t},\r\n\t\t\tfail: (res) => {\r\n\t\t\t\t//console.log('getUserInfo reject', res.data)\r\n\t\t\t\treject(res)\r\n\t\t\t\t//data.name = '我';\r\n\t\t\t\t//data.avatarUrl = 'res/raw-assets/resources/textures/fireSprite.png';\r\n\t\t\t\t//this.drawSelfRank(data.KVDataList);\r\n\t\t\t}\r\n\t\t})\r\n\t\t\r\n\t},\r\n\tdrawRankFrientList(rankList,data){\r\n\t\twx.getUserInfo({\r\n\t\t\topenIdList: ['selfOpenId'],\r\n\t\t\tlang: 'zh_CN',\r\n\t\t\tsuccess: (res) => {\r\n\t\t\t\tconsole.log('getUserInfo success', res.data);\r\n\t\t\t\tfor(var i = 0;i < rankList.length;i++){\r\n\t\t\t\t\tvar item = rankList[i];\r\n\t\t\t\t\titem.rank = i + 1;\r\n\t\t\t\t\titem.my = false;\r\n\t\t\t\t\tif(item.nickname == res.data[0].nickName){\r\n\t\t\t\t\t\titem.my = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tthis.drawRankList(rankList,data);\r\n\t\t\t},\r\n\t\t\tfail: (res) => {\r\n\t\t\t\t//console.log('getUserInfo reject', res.data)\r\n\t\t\t\treject(res)\r\n\t\t\t\t//data.name = '我';\r\n\t\t\t\t//data.avatarUrl = 'res/raw-assets/resources/textures/fireSprite.png';\r\n\t\t\t\t//this.drawSelfRank(data.KVDataList);\r\n\t\t\t}\r\n\t\t})\r\n\t},\r\n\tdrawRankList(drawList,data){\r\n\t\tconsole.log('drawRankList',drawList,data);\r\n\t\tif(data.type == \"gameOverUIRank\"){\r\n\t\t\tthis.finishGameRank.getComponent(\"FinishGameRank\").loadRank(drawList);\r\n\t\t}else if(data.type == \"rankUIFriendRank\" || data.type == \"rankUIGroupRank\"){\r\n\t\t\tthis.rankGmameView.getComponent(\"RankGameView\").loadRank(drawList);\r\n\t\t}else if(data.type == 'battleUIRank'){\r\n\t\t\tif(this.battleInit == true){\r\n\t\t\t\tthis.aboveGameView.getComponent(\"AboveGameView\").loadRank(drawList,this.myRankData,data.score);\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\tsortRank(data){\r\n\t\treturn data.sort(this.sortFunction);\r\n\t},\r\n\tsortFunction(a,b){\r\n\t\tvar amaxScore = 0;\r\n\t\tvar bmaxScore = 0;\r\n\t\tfor(var i = 0;i < a.KVDataList.length;i++){\r\n\t\t\tvar aitem = a.KVDataList[i];\r\n\t\t\t//console.log(aitem);\r\n\t\t\tif(aitem.key == \"maxScore\"){\r\n\t\t\t\tamaxScore = parseInt(aitem.value);\r\n\t\t\t}\r\n\t\t}\r\n\t\tfor(var i = 0;i < b.KVDataList.length;i++){\r\n\t\t\tvar bitem = b.KVDataList[i];\r\n\t\t\t//console.log(bitem);\r\n\t\t\tif(bitem.key == \"maxScore\"){\r\n\t\t\t\tbmaxScore = parseInt(bitem.value);\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn  bmaxScore - amaxScore;\r\n\t}\r\n});\r\n"]}